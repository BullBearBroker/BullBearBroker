[pytest]
# Carpeta base donde buscará tests
testpaths = backend/tests

# Mostrar nombres completos de los tests (mantenemos -v para depuración)
# QA: usamos importlib para evitar colisiones de rutas en xdist
addopts = -v --import-mode=importlib

# QA: registrar marcadores para separar pruebas lentas / sensibles
markers =
    slow: pruebas lentas o con temporizadores reales
    rate_limit: pruebas sensibles a rate-limiting/tiempo
    e2e: pruebas de integración/E2E que no van en paralelo

# Ignorar warnings molestos de deprecación (FastAPI, datetime, passlib)
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
    ignore:overflow encountered in scalar multiply
    ignore:overflow encountered in scalar add
    ignore:invalid value encountered in scalar divide

# Mejor integración con asyncio (modo estricto por defecto)
asyncio_mode = strict
asyncio_default_fixture_loop_scope = function
